# https://github.com/lima-vm/lima/blob/master/templates/default.yaml
minimumLimaVersion: 2.0.0

base:
- template:ubuntu-lts.yaml

firmware:
  legacyBIOS: true

provision:
  # install packages for building and testing GNU Coreutils
  - mode: system
    script: |
      #!/bin/bash
      set -eux -o pipefail

      apt-get update
      apt-get install -y --no-install-recommends \
       attr \
       autoconf \
       automake \
       autopoint \
       bison \
       clang \
       g++ \
       gcc \
       gdb \
       gperf \
       jq \
       libacl1-dev \
       libattr1-dev \
       libcap-dev \
       libexpect-perl \
       libselinux1-dev \
       make \
       python3-pip \
       python3-pyinotify \
       quilt \
       rsync \
       texinfo \
       valgrind
  # install rust toolchain for user
  - mode: user
    script: |
      #!/bin/bash
      set -eux -o pipefail
      curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
